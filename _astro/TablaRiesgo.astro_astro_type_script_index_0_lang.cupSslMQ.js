function C(){console.log("ğŸ” [DEBUG] Iniciando highlightTFGeRAC()");const i=document.getElementById("tfge-valor"),d=document.getElementById("rac-valor");if(console.log("ğŸ” [DEBUG] Elementos encontrados:",{tfgeValor:i?"âœ… Encontrado":"âŒ No encontrado",racValor:d?"âœ… Encontrado":"âŒ No encontrado"}),!i||!d){console.warn("âš ï¸ [DEBUG] Elementos no encontrados, terminando funciÃ³n");return}const D=i.textContent,h=d.textContent;console.log("ğŸ” [DEBUG] Contenido de elementos:",{tfgeTextoOriginal:`"${D}"`,racTextoOriginal:`"${h}"`});const e=parseFloat(i.textContent||"0");let o=0;const G=d.textContent?.match(/\d+/);G&&(o=parseInt(G[0])),console.log("ğŸ” [DEBUG] Valores parseados:",{tfge:e,tfgeType:typeof e,tfgeIsNaN:isNaN(e),rac:o,racType:typeof o,racIsNaN:isNaN(o),racMatch:G,racMatchOriginal:d.textContent?.match(/\d+/)});const u=document.getElementById("creatinina"),m=document.getElementById("edad"),E=document.getElementById("genero"),f=document.getElementById("albumina"),v=document.getElementById("orina");console.log("ğŸ” [DEBUG] Estado de inputs:",{creatinina:{elemento:u?"âœ… Encontrado":"âŒ No encontrado",valor:u?.value||"Sin valor"},edad:{elemento:m?"âœ… Encontrado":"âŒ No encontrado",valor:m?.value||"Sin valor"},genero:{elemento:E?"âœ… Encontrado":"âŒ No encontrado",valor:E?.value||"Sin valor"},albumina:{elemento:f?"âœ… Encontrado":"âŒ No encontrado",valor:f?.value||"Sin valor"},orina:{elemento:v?"âœ… Encontrado":"âŒ No encontrado",valor:v?.value||"Sin valor"}});const B=u?.value&&m?.value&&E?.value&&f?.value&&v?.value&&!isNaN(e)&&e>0&&!isNaN(o)&&o>=0;if(console.log("ğŸ” [DEBUG] ValidaciÃ³n de completitud:",{creatininaOK:!!u?.value,edadOK:!!m?.value,generoOK:!!E?.value,albuminaOK:!!f?.value,orinaOK:!!v?.value,tfgeOK:!isNaN(e)&&e>0,racOK:!isNaN(o)&&o>=0,inputsCompletos:B}),document.querySelectorAll(".highlight-cell").forEach(s=>{s.classList.remove("highlight-cell");const a=s;a.dataset.originalText&&(a.innerHTML=a.dataset.originalText,a.removeAttribute("data-original-text"))}),!B){console.warn("âš ï¸ [DEBUG] Inputs incompletos, terminando funciÃ³n");return}console.log("âœ… [DEBUG] Todos los inputs estÃ¡n completos, procediendo con la categorizaciÃ³n");let t=0,g="";o<30?(t=1,g="A1 (Normal a ligero aumento)"):o>=30&&o<=300?(t=2,g="A2 (Incremento moderado)"):o>300&&(t=3,g="A3 (Incremento severo)"),console.log("ğŸ” [DEBUG] CategorizaciÃ³n RAC:",{valorRAC:o,columna:t,categoria:g});let n=0,c="";if(e>=90?(n=1,c="G1 (Normal o alto)"):e>=60&&e<90?(n=2,c="G2 (DisminuciÃ³n ligera)"):e>=45&&e<60?(n=3,c="G3a (DisminuciÃ³n leve-moderada)"):e>=30&&e<45?(n=4,c="G3b (DisminuciÃ³n moderada a severa)"):e>=15&&e<30?(n=5,c="G4 (DisminuciÃ³n severa)"):e<15&&(n=6,c="G5 (Insuficiencia renal)"),console.log("ğŸ” [DEBUG] CategorizaciÃ³n TFGe:",{valorTFGe:e,fila:n,categoria:c}),console.log("ğŸ” [DEBUG] Resultado de categorizaciÃ³n:",{posicionFinal:`Fila ${n}, Columna ${t}`,coordenadas:`${c} + ${g}`}),t>0&&n>0){console.log("âœ… [DEBUG] Iniciando resaltado de celda");const s=document.querySelector("#table");if(!s){console.error("âŒ [DEBUG] No se encontrÃ³ la tabla");return}console.log("ğŸ” [DEBUG] Tabla encontrada, filas disponibles:",s.getElementsByTagName("tr").length);const a=s.getElementsByTagName("tr")[n-1];if(!a){console.error("âŒ [DEBUG] No se encontrÃ³ la fila",n-1);return}console.log("ğŸ” [DEBUG] Fila encontrada, celdas disponibles:",a.cells.length),console.log("ğŸ” [DEBUG] Estructura de la fila:",Array.from(a.cells).map((l,N)=>({indice:N,contenido:l.textContent?.trim().substring(0,20)+"..."})));let r;if(n===1?r=3+t:r=2+t,console.log("ğŸ” [DEBUG] CÃ¡lculo de Ã­ndice corregido:",{tfgeRow:n,racCol:t,targetIndex:r,formula:n===1?"3 + racCol (con header)":"2 + racCol (sin header)"}),r<a.cells.length){const l=a.cells[r];l?(console.log("âœ… [DEBUG] Celda encontrada:",{indice:r,contenidoAnterior:l.innerHTML,clases:l.className}),l.classList.add("highlight-cell"),l.dataset.originalText=l.innerHTML,l.innerHTML="<span>Su paciente estÃ¡ aquÃ­</span>",console.log("âœ… [DEBUG] Celda resaltada exitosamente")):console.error("âŒ [DEBUG] Celda es null en Ã­ndice",r)}else console.error("âŒ [DEBUG] Ãndice de columna fuera de rango:",{targetIndex:r,columnasDisponibles:a.cells.length,TFGe:e,RAC:o})}else console.error("âŒ [DEBUG] Valores fuera de rango:",{TFGe:e,RAC:o,filaCalculada:n,columnaCalculada:t,rangoValido:"racCol > 0 && tfgeRow > 0"})}window.addEventListener("tfgeCalculated",function(i){console.log("ğŸ¯ [DEBUG] Evento tfgeCalculated recibido:",i),C()});window.addEventListener("racCalculated",function(i){console.log("ğŸ¯ [DEBUG] Evento racCalculated recibido:",i),C()});document.addEventListener("DOMContentLoaded",function(){console.log("ğŸ¯ [DEBUG] DOMContentLoaded - Ejecutando highlightTFGeRAC inicial"),C()});
